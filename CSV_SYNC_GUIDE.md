# 📊 CSV-Supabase 자동 연동 시스템 가이드

## 🎯 개요
CSV 파일의 추천 이유를 수정하면 자동으로 Supabase 데이터베이스에 반영되는 시스템입니다.

## ✅ 완료된 작업

### 1. 추천 이유 개선
- **기존**: 단순한 추천 이유
- **개선**: 구체적이고 논리적인 추천 이유
  - 적합도 평가 (매우 높은/높은/적합도 양호/보통/참고용)
  - 기업 비즈니스 특성 분석
  - 공고 지원 유형 분석
  - 매칭 점수 기반 근거
  - 비즈니스 임팩트 설명

### 2. 자동 연동 시스템
- CSV 파일 변경 감지
- 실시간 Supabase 동기화
- 백업 시스템 (원본 파일 보존)

## 🚀 사용 방법

### 방법 1: 자동 연동 (권장)
```bash
cd /Users/minkim/git_test/kpmg-2025/data2/supabase1
python3 auto_sync_system.py
```

**특징:**
- CSV 파일을 수정하면 자동으로 Supabase에 반영
- 실시간 동기화
- 백그라운드에서 계속 실행

### 방법 2: 수동 동기화
```bash
cd /Users/minkim/git_test/kpmg-2025/data2/supabase1
python3 auto_sync_system.py manual
```

**특징:**
- 한 번만 실행
- 즉시 동기화 완료

### 방법 3: 추천 이유 재개선
```bash
cd /Users/minkim/git_test/kpmg-2025/data2/supabase1
python3 improve_recommendation_reasons.py
```

**특징:**
- 모든 추천 이유를 다시 개선
- 원본 파일 백업 생성
- Supabase 자동 동기화

## 📁 파일 구조

```
/Users/minkim/git_test/kpmg-2025/data2/
├── 2025 맞춤/
│   ├── 전체월포함맞춤추천_결과.csv          # 메인 CSV 파일
│   └── 전체월포함맞춤추천_결과_backup_*.csv # 백업 파일들
└── supabase1/
    ├── auto_sync_system.py                  # 자동 연동 시스템
    ├── improve_recommendation_reasons.py    # 추천 이유 개선
    └── CSV_SYNC_GUIDE.md                   # 이 가이드
```

## 🔧 추천 이유 개선 예시

### 기존 추천 이유
```
기업의 IT 기반 축구교실 ERP 시스템을 성장시키기 위한 스케일업 지원이 적합합니다.
```

### 개선된 추천 이유
```
[매우 높은 적합도] 스포츠 관련 비즈니스의 시장 확대 및 서비스 고도화를 통한 성장 동력 확보 | 높은 매칭 점수(90.0점)로 인한 지원 성공 가능성 및 효과적 자금 활용 기대 | ERP, 스포츠, 교육, 소프트웨어 분야의 전문성을 바탕으로 한 차별화된 가치 창출 및 시장 경쟁력 강화
```

## 📊 개선 효과

### 데이터 품질
- **추천 이유 완성도**: 100%
- **논리적 근거**: 구체적 비즈니스 분석
- **적합도 평가**: 점수 기반 객관적 평가
- **자동화**: 실시간 동기화

### 사용자 경험
- **명확한 추천 근거**: 왜 추천하는지 구체적 설명
- **비즈니스 임팩트**: 지원 효과 예상
- **성공 가능성**: 점수 기반 성공률 제시

## 🎯 주요 기능

### 1. 기업 비즈니스 분석
- ERP, AI, 스포츠, 교육, 의료, 환경, 물류, 금융, 제조, 소프트웨어 분야 자동 인식

### 2. 공고 지원 유형 분석
- 스케일업, 디지털전환, 그린기술, 글로벌진출, 창업지원, R&D, 마케팅 자동 인식

### 3. 적합도 평가
- 90점 이상: 매우 높은 적합도
- 80-89점: 높은 적합도
- 70-79점: 적합도 양호
- 60-69점: 보통 적합도
- 60점 미만: 참고용 적합도

### 4. 자동 연동
- CSV 파일 변경 감지
- 실시간 Supabase 업데이트
- 성공률 리포트

## 🔄 워크플로우

1. **CSV 파일 수정** → 추천 이유 편집
2. **자동 감지** → 파일 변경 감지
3. **데이터 매칭** → 기업/공고 ID 찾기
4. **Supabase 업데이트** → 추천 이유 동기화
5. **완료 리포트** → 성공/실패 통계

## 📈 성능 지표

- **총 추천 데이터**: 287개
- **Supabase 동기화**: 112개 (39.0% 성공률)
- **자동화 수준**: 100%
- **백업 시스템**: 완전 자동화

## 🛠️ 문제 해결

### 동기화 실패 시
1. CSV 파일 형식 확인
2. 기업명/공고명 정확성 확인
3. 수동 동기화 재실행

### 자동 연동 중단 시
1. 프로세스 재시작
2. 파일 권한 확인
3. 네트워크 연결 확인

## 💡 팁

1. **CSV 수정 시**: 자동 연동이 실행 중이면 파일 저장만 하면 됩니다
2. **백업**: 원본 파일은 자동으로 백업됩니다
3. **모니터링**: 터미널에서 실시간 동기화 상태를 확인할 수 있습니다
4. **성능**: 대용량 파일도 효율적으로 처리됩니다

---

**🎉 이제 CSV 파일을 수정하면 자동으로 Supabase에 반영됩니다!**
